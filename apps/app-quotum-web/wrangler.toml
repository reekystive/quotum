# For more details on how to configure Wrangler, refer to:
# https://developers.cloudflare.com/workers/wrangler/configuration/

name = "quotum-dev"
main = ".open-next/worker.js"
compatibility_date = "2025-03-01"
compatibility_flags = ["nodejs_compat", "global_fetch_strictly_public"]

[assets]
binding = "ASSETS"
directory = ".open-next/assets"

[observability]
enabled = true

# Smart Placement
# Docs: https://developers.cloudflare.com/workers/configuration/smart-placement/#smart-placement
# [placement]
# mode = "smart"

# Bindings
# Bindings allow your Worker to interact with resources on the Cloudflare Developer Platform, including
# databases, object storage, AI inference, real-time communication and more.
# https://developers.cloudflare.com/workers/runtime-apis/bindings/

[[d1_databases]]
binding = "D1"
database_name = "quotum-dev"
database_id = "375fdcce-2aa7-4c56-a80e-73b088830f69"
# Use drizzle-kit for database migrations in local development. This is only used in ci testing.
migrations_dir = "../../apps/app-quotum-server/drizzle"

# Environment Variables
# https://developers.cloudflare.com/workers/wrangler/configuration/#environment-variables
# [vars]
# API_URL = "https://dev-api.example.com"

# Static Assets
# https://developers.cloudflare.com/workers/static-assets/binding/
# [assets]
# directory = "./public/"
# binding = "ASSETS"

# Service Bindings (communicate between multiple Workers)
# https://developers.cloudflare.com/workers/wrangler/configuration/#service-bindings
# [[services]]
# binding = "MY_SERVICE"
# service = "my-service"


# Environment-specific configurations
# The default environment is development, and production env tag is required to set explicitly
[env.production]
name = "quotum"

[[env.production.d1_databases]]
binding = "D1"
database_name = "quotum-prod"
database_id = "11844de3-fc0e-4375-ab3a-636dca28f8ce"

# [env.production.vars]
# API_URL = "https://api.example.com"

# Note: Use secrets to store sensitive data.
# https://developers.cloudflare.com/workers/configuration/secrets/


[env.staging]
name = "quotum-staging"

[[env.staging.d1_databases]]
binding = "D1"
database_name = "quotum-staging"
database_id = "edd8ab2f-5abd-4a08-a779-15927e5dfee6"
